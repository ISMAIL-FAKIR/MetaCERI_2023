{"ast":null,"code":"import _asyncToGenerator from \"/nfs/data01/data/uapv21/uapv2100315/public_html/MonProjet/frontend/MetaCARI/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@ngrx/store\";\nimport * as i2 from \"../posts.service\";\nimport * as i3 from \"../web-socket.service\";\nimport * as i4 from \"@angular/router\";\nimport * as i5 from \"../notification.service\";\nimport * as i6 from \"@angular/common\";\nimport * as i7 from \"@angular/forms\";\nfunction HomeComponent_div_22_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"p\", 47);\n    i0.ɵɵtext(2, \"Identifiant :\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"strong\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(5, \"br\");\n    i0.ɵɵelementStart(6, \"p\", 47);\n    i0.ɵɵtext(7, \"Derni\\u00E8re Connexion : \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"strong\");\n    i0.ɵɵtext(9);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const p_r12 = ctx.ngIf;\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(p_r12.username);\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate(p_r12.lastConnexion);\n  }\n}\nfunction HomeComponent_div_72_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵelement(1, \"img\", 48);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const user_r13 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵpropertyInterpolate(\"src\", user_r13.avatar, i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate2(\" \", user_r13.nom, \" \", user_r13.prenom, \" \");\n  }\n}\nfunction HomeComponent_div_76_p_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\", 65);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const post_r14 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\"\", post_r14.Sharedby, \" a republi\\u00E9 ceci \");\n  }\n}\nfunction HomeComponent_div_76_p_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\", 66);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const post_r14 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(post_r14.bodyPostShared);\n  }\n}\nfunction HomeComponent_div_76_div_23_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"button\", 67)(2, \"p\", 47)(3, \"i\", 68);\n    i0.ɵɵtext(4, \"\\uF087\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(5, \" J'aime\");\n    i0.ɵɵelementEnd()()();\n  }\n}\nfunction HomeComponent_div_76_div_24_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"button\", 69)(2, \"p\", 47);\n    i0.ɵɵelement(3, \"i\", 70);\n    i0.ɵɵtext(4, \" J'aime\");\n    i0.ɵɵelementEnd()()();\n  }\n}\nfunction HomeComponent_div_76_form_27_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r30 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"form\", 18, 71);\n    i0.ɵɵlistener(\"ngSubmit\", function HomeComponent_div_76_form_27_Template_form_ngSubmit_0_listener() {\n      i0.ɵɵrestoreView(_r30);\n      const _r27 = i0.ɵɵreference(1);\n      const ctx_r29 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r29.onShared(_r27));\n    });\n    i0.ɵɵelement(2, \"input\", 60)(3, \"input\", 72)(4, \"input\", 73, 74);\n    i0.ɵɵtext(6, \"\\u00A0\\u00A0 \");\n    i0.ɵɵelementStart(7, \"button\", 67)(8, \"p\", 47);\n    i0.ɵɵelement(9, \"i\", 75);\n    i0.ɵɵtext(10, \" Partager \");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const p_r26 = ctx.ngIf;\n    const post_r14 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵpropertyInterpolate(\"value\", post_r14._id);\n    i0.ɵɵpropertyInterpolate(\"ngModel\", post_r14._id);\n    i0.ɵɵadvance(1);\n    i0.ɵɵpropertyInterpolate(\"value\", p_r26.username);\n    i0.ɵɵpropertyInterpolate(\"ngModel\", p_r26.username);\n  }\n}\nfunction HomeComponent_div_76_div_33_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 20);\n    i0.ɵɵelement(1, \"input\", 76, 77);\n    i0.ɵɵtext(3, \"\\u00A0\\u00A0 \");\n    i0.ɵɵelement(4, \"input\", 60)(5, \"input\", 72);\n    i0.ɵɵelementStart(6, \"button\", 23);\n    i0.ɵɵtext(7, \"Ajouter\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const p_r32 = ctx.ngIf;\n    const post_r14 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(4);\n    i0.ɵɵpropertyInterpolate(\"value\", post_r14._id);\n    i0.ɵɵpropertyInterpolate(\"ngModel\", post_r14._id);\n    i0.ɵɵadvance(1);\n    i0.ɵɵpropertyInterpolate(\"value\", p_r32.username);\n    i0.ɵɵpropertyInterpolate(\"ngModel\", p_r32.username);\n  }\n}\nfunction HomeComponent_div_76_div_35_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"div\", 17)(2, \"div\", 51)(3, \"div\", 78);\n    i0.ɵɵelement(4, \"img\", 48);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"div\", 79)(6, \"p\", 80)(7, \"strong\");\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(9, \"p\", 54);\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelement(11, \"div\", 81);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelement(12, \"br\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const comment_r35 = ctx.$implicit;\n    i0.ɵɵadvance(4);\n    i0.ɵɵpropertyInterpolate(\"src\", comment_r35.commentatorAvatar, i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate2(\"\", comment_r35.commentatorLastName, \" \", comment_r35.commentatorName, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(comment_r35.text);\n  }\n}\nfunction HomeComponent_div_76_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r37 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtemplate(1, HomeComponent_div_76_p_1_Template, 2, 1, \"p\", 49);\n    i0.ɵɵtemplate(2, HomeComponent_div_76_p_2_Template, 2, 1, \"p\", 50);\n    i0.ɵɵelementStart(3, \"div\", 17)(4, \"div\", 41)(5, \"div\", 51)(6, \"div\", 52);\n    i0.ɵɵelement(7, \"img\", 48);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"div\", 53);\n    i0.ɵɵelement(9, \"br\");\n    i0.ɵɵelementStart(10, \"p\", 54)(11, \"strong\");\n    i0.ɵɵtext(12);\n    i0.ɵɵelementEnd()()()();\n    i0.ɵɵelement(13, \"img\", 55);\n    i0.ɵɵelementStart(14, \"div\", 56)(15, \"h5\", 57);\n    i0.ɵɵtext(16);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(17, \"p\", 54);\n    i0.ɵɵtext(18);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(19, \"div\", 58)(20, \"form\", 18, 59);\n    i0.ɵɵlistener(\"ngSubmit\", function HomeComponent_div_76_Template_form_ngSubmit_20_listener() {\n      i0.ɵɵrestoreView(_r37);\n      const _r17 = i0.ɵɵreference(21);\n      const ctx_r36 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r36.onLike(_r17));\n    });\n    i0.ɵɵelement(22, \"input\", 60);\n    i0.ɵɵtemplate(23, HomeComponent_div_76_div_23_Template, 6, 0, \"div\", 16);\n    i0.ɵɵtemplate(24, HomeComponent_div_76_div_24_Template, 5, 0, \"div\", 16);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(25, \"p\", 61);\n    i0.ɵɵtext(26);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(27, HomeComponent_div_76_form_27_Template, 11, 4, \"form\", 62);\n    i0.ɵɵpipe(28, \"async\");\n    i0.ɵɵelementEnd()()()();\n    i0.ɵɵelement(29, \"br\");\n    i0.ɵɵelementStart(30, \"div\", 17)(31, \"form\", 18, 63);\n    i0.ɵɵlistener(\"ngSubmit\", function HomeComponent_div_76_Template_form_ngSubmit_31_listener() {\n      i0.ɵɵrestoreView(_r37);\n      const _r21 = i0.ɵɵreference(32);\n      const ctx_r38 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r38.onSubmit(_r21));\n    });\n    i0.ɵɵtemplate(33, HomeComponent_div_76_div_33_Template, 8, 4, \"div\", 64);\n    i0.ɵɵpipe(34, \"async\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtemplate(35, HomeComponent_div_76_div_35_Template, 13, 4, \"div\", 43);\n    i0.ɵɵelement(36, \"br\")(37, \"hr\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const post_r14 = ctx.$implicit;\n    const ctx_r9 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", post_r14.Sharedby);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", post_r14.bodyPostShared);\n    i0.ɵɵadvance(5);\n    i0.ɵɵpropertyInterpolate(\"src\", post_r14.creatorAvatar, i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate2(\"\", post_r14.creator, \" \", post_r14.prenom, \" \");\n    i0.ɵɵadvance(1);\n    i0.ɵɵpropertyInterpolate(\"src\", post_r14.images.url, i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(post_r14.body);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"date : \", post_r14.date, \"\");\n    i0.ɵɵadvance(4);\n    i0.ɵɵpropertyInterpolate(\"value\", post_r14._id);\n    i0.ɵɵpropertyInterpolate(\"ngModel\", post_r14._id);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r9.isNotLiked);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r9.isLiked);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"\", post_r14.likes, \" J'aime\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", i0.ɵɵpipeBind1(28, 16, ctx_r9.$));\n    i0.ɵɵadvance(6);\n    i0.ɵɵproperty(\"ngIf\", i0.ɵɵpipeBind1(34, 18, ctx_r9.infos$));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", post_r14.comments);\n  }\n}\nfunction HomeComponent_div_80_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r40 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\")(1, \"button\", 8);\n    i0.ɵɵlistener(\"click\", function HomeComponent_div_80_Template_button_click_1_listener() {\n      i0.ɵɵrestoreView(_r40);\n      const ctx_r39 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r39.previousMethod());\n    });\n    i0.ɵɵtext(2, \"Previous\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction HomeComponent_div_82_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r42 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\")(1, \"button\", 8);\n    i0.ɵɵlistener(\"click\", function HomeComponent_div_82_Template_button_click_1_listener() {\n      i0.ɵɵrestoreView(_r42);\n      const ctx_r41 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r41.nextMethod());\n    });\n    i0.ɵɵtext(2, \"Next\");\n    i0.ɵɵelementEnd()();\n  }\n}\nexport let HomeComponent = /*#__PURE__*/(() => {\n  class HomeComponent {\n    constructor(store, d1, _webSocket, route, notificationService) {\n      this.store = store;\n      this.d1 = d1;\n      this._webSocket = _webSocket;\n      this.route = route;\n      this.notificationService = notificationService;\n      this.successMessage = null;\n      // recuperation des variables globales \n      this.infos$ = this.store.select('infos');\n      // gestion de la pagination par rapport au type de trie et type de filtre \n      this.nextPage = 0;\n      this.nextBoolean = false;\n      this.previousBoolean = false;\n      this.previousPage = 0;\n      this.isNotLiked = true;\n      this.isLiked = false;\n      this.isFiltre = false;\n      this.isFiltreUser = false;\n      this.isTrie = false;\n      this.isTrieLikes = false;\n      this.isTrieDate = false;\n      //web socket\n      this.webSocket = _webSocket;\n    }\n    ngOnInit() {\n      var _this = this;\n      //If connexion réussie (l'affichage du bandeau sera en /home)\n      this.notificationService.successMessage$.subscribe(statusMsg => {\n        this.successMessage = statusMsg;\n        //la dernière connexion dans le service de notification\n        this.notificationService.setLastLoginTime();\n      });\n      // appel au service \n      this.d1.getPosts(1).subscribe( /*#__PURE__*/function () {\n        var _ref = _asyncToGenerator(function* (res) {\n          console.log(\"mamie !!!\", res.posts);\n          _this.posts = res.posts.data;\n          _this.connectedUsers = res.connectedUsers;\n          _this.webSocket.listen('notification').subscribe(data => {\n            _this.connectedUsers = data;\n          });\n          _this.webSocket.listen('likes').subscribe(data => {\n            _this.posts.map(item => {\n              if (item._id == data._id) {\n                console.log(\"item from component \", item._id, item.likes, \"different likes \", data.likes);\n                item.likes = data.likes;\n              }\n            });\n          });\n          // si res.posts.previous.page est défini on aura la valeur de ce dernier retourné si non undefined ce qui va permet de renvoyer 0 à la place . \n          _this.nextPage = res.posts.next?.page || 0;\n          _this.previousPage = res.posts.previous?.page || 0;\n          if (_this.nextPage != 0) {\n            _this.nextBoolean = true;\n          } else {\n            _this.nextBoolean = false;\n          }\n          if (_this.previousPage != 0) {\n            _this.previousBoolean = true;\n          } else {\n            _this.previousBoolean = false;\n          }\n        });\n        return function (_x) {\n          return _ref.apply(this, arguments);\n        };\n      }(), err => {\n        console.log(err);\n      });\n    }\n    // La méthode qui affiche le post suivant \n    nextMethod() {\n      // filtre de mes messages activé \n      if (this.isFiltre == true) {\n        console.log(\"==> clicked pur is Filtre \");\n        this.d1.FiltreVosMessage(this.nextPage).subscribe(res => {\n          this.posts = res.posts.data;\n          this.nextPage = res.posts.next?.page || 0;\n          this.previousPage = res.posts.previous?.page || 0;\n          if (this.nextPage != 0) {\n            this.nextBoolean = true;\n          } else {\n            this.nextBoolean = false;\n          }\n          if (this.previousPage != 0) {\n            this.previousBoolean = true;\n          } else {\n            this.previousBoolean = false;\n          }\n        }, err => {});\n      }\n      // filtre des autres messages activé \n      else if (this.isFiltreUser == true) {\n        this.d1.FiltreUsersMessage(this.nextPage).subscribe(res => {\n          this.posts = res.posts.data;\n          this.nextPage = res.posts.next?.page || 0;\n          this.previousPage = res.posts.previous?.page || 0;\n          if (this.nextPage != 0) {\n            this.nextBoolean = true;\n          } else {\n            this.nextBoolean = false;\n          }\n          if (this.previousPage != 0) {\n            this.previousBoolean = true;\n          } else {\n            this.previousBoolean = false;\n          }\n        }, err => {});\n      }\n      // Trie des autres messages \n      else if (this.isTrieLikes == true) {\n        console.log(\"==> clicked pour isTrieLikes \");\n        this.d1.sortLikes(this.nextPage).subscribe(res => {\n          this.posts = res.posts.data;\n          this.nextPage = res.posts.next?.page || 0;\n          this.previousPage = res.posts.previous?.page || 0;\n          if (this.nextPage != 0) {\n            this.nextBoolean = true;\n          } else {\n            this.nextBoolean = false;\n          }\n          if (this.previousPage != 0) {\n            this.previousBoolean = true;\n          } else {\n            this.previousBoolean = false;\n          }\n        }, err => {});\n      } else if (this.isTrie == true) {\n        console.log(\"==> clicked pour is isTrie\");\n        this.d1.sortConnu(this.nextPage).subscribe(res => {\n          this.posts = res.posts.data;\n          this.nextPage = res.posts.next?.page || 0;\n          this.previousPage = res.posts.previous?.page || 0;\n          if (this.nextPage != 0) {\n            this.nextBoolean = true;\n          } else {\n            this.nextBoolean = false;\n          }\n          if (this.previousPage != 0) {\n            this.previousBoolean = true;\n          } else {\n            this.previousBoolean = false;\n          }\n        }, err => {\n          console.log(err);\n        });\n      } else if (this.isTrieDate == true) {\n        console.log(\"==> clicked pour is isTrieDate\");\n        this.d1.sortDate(this.nextPage).subscribe(res => {\n          this.posts = res.posts.data;\n          this.nextPage = res.posts.next?.page || 0;\n          this.previousPage = res.posts.previous?.page || 0;\n          if (this.nextPage != 0) {\n            this.nextBoolean = true;\n          } else {\n            this.nextBoolean = false;\n          }\n          if (this.previousPage != 0) {\n            this.previousBoolean = true;\n          } else {\n            this.previousBoolean = false;\n          }\n        }, err => {\n          console.log(err);\n        });\n      }\n      // Si aucun filtre ou trie n'est spécifié, On trie par likes .\n      else {\n        console.log(\"==> clicked pour rien \");\n        this.d1.sortLikes(this.nextPage).subscribe(res => {\n          this.posts = res.posts.data;\n          this.nextPage = res.posts.next?.page || 0;\n          this.previousPage = res.posts.previous?.page || 0;\n          if (this.nextPage != 0) {\n            this.nextBoolean = true;\n          } else {\n            this.nextBoolean = false;\n          }\n          if (this.previousPage != 0) {\n            this.previousBoolean = true;\n          } else {\n            this.previousBoolean = false;\n          }\n          console.log(this.posts);\n        }, err => {\n          console.log(err);\n        });\n      }\n    }\n    // La methode qui affiche le post precedant \n    previousMethod() {\n      if (this.isFiltre == true) {\n        this.d1.FiltreVosMessage(this.previousPage).subscribe(res => {\n          this.posts = res.posts.data;\n          this.nextPage = res.posts.next?.page || 0;\n          this.previousPage = res.posts.previous?.page || 0;\n          if (this.nextPage != 0) {\n            this.nextBoolean = true;\n          } else {\n            this.nextBoolean = false;\n          }\n          if (this.previousPage != 0) {\n            this.previousBoolean = true;\n          } else {\n            this.previousBoolean = false;\n          }\n        }, err => {});\n      } else if (this.isFiltreUser == true) {\n        this.d1.FiltreUsersMessage(this.previousPage).subscribe(res => {\n          this.posts = res.posts.data;\n          this.nextPage = res.posts.next?.page || 0;\n          this.previousPage = res.posts.previous?.page || 0;\n          if (this.nextPage != 0) {\n            this.nextBoolean = true;\n          } else {\n            this.nextBoolean = false;\n          }\n          if (this.previousPage != 0) {\n            this.previousBoolean = true;\n          } else {\n            this.previousBoolean = false;\n          }\n        }, err => {});\n      } else if (this.isTrieLikes == true) {\n        this.d1.sortLikes(this.previousPage).subscribe(res => {\n          this.posts = res.posts.data;\n          this.nextPage = res.posts.next?.page || 0;\n          this.previousPage = res.posts.previous?.page || 0;\n          if (this.nextPage != 0) {\n            this.nextBoolean = true;\n          } else {\n            this.nextBoolean = false;\n          }\n          if (this.previousPage != 0) {\n            this.previousBoolean = true;\n          } else {\n            this.previousBoolean = false;\n          }\n        }, err => {});\n      } else if (this.isTrieDate == true) {\n        this.d1.sortDate(this.previousPage).subscribe(res => {\n          this.posts = res.posts.data;\n          this.nextPage = res.posts.next?.page || 0;\n          this.previousPage = res.posts.previous?.page || 0;\n          if (this.nextPage != 0) {\n            this.nextBoolean = true;\n          } else {\n            this.nextBoolean = false;\n          }\n          if (this.previousPage != 0) {\n            this.previousBoolean = true;\n          } else {\n            this.previousBoolean = false;\n          }\n        }, err => {});\n      } else if (this.isTrie == true) {\n        this.d1.sortConnu(this.previousPage).subscribe(res => {\n          this.posts = res.posts.data;\n          this.nextPage = res.posts.next?.page || 0;\n          this.previousPage = res.posts.previous?.page || 0;\n          if (this.nextPage != 0) {\n            this.nextBoolean = true;\n          } else {\n            this.nextBoolean = false;\n          }\n          if (this.previousPage != 0) {\n            this.previousBoolean = true;\n          } else {\n            this.previousBoolean = false;\n          }\n        }, err => {\n          console.log(err);\n        });\n      } else {\n        this.d1.sortLikes(this.previousPage).subscribe(res => {\n          this.posts = res.posts.data;\n          this.nextPage = res.posts.next?.page || 0;\n          this.previousPage = res.posts.previous?.page || 0;\n          if (this.nextPage != 0) {\n            this.nextBoolean = true;\n          } else {\n            this.nextBoolean = false;\n          }\n          if (this.previousPage != 0) {\n            this.previousBoolean = true;\n          } else {\n            this.previousBoolean = false;\n          }\n          console.log(this.posts);\n        }, err => {\n          console.log(err);\n        });\n      }\n    }\n    onLike(f2) {\n      console.log(f2.value);\n      if (this.isLiked == false) {\n        this.d1.setLike(f2.value.idPost).subscribe(res => {\n          console.log(\"reussi\");\n        }, err => {\n          console.log(\"it's an error\", err);\n        });\n        this.isLiked = true;\n        this.isNotLiked = false;\n      } else {\n        this.d1.removeLike(f2.value.idPost).subscribe(res => {});\n        this.isLiked = false;\n        this.isNotLiked = true;\n      }\n    }\n    onSubmit(f) {\n      let today = new Date();\n      f.value.date = today.getFullYear() + '-' + today.getMonth() + '-' + today.getDate();\n      f.value.hour = today.getHours() + ':' + today.getMinutes();\n      console.log(\"MonCommentaire est le suivant :\", f.value);\n      this.d1.setComment(f.value).subscribe(res => {\n        //this._flashMessagesService.show(\"Commentaire ajouté avec succée\", { cssClass: 'alert-success', timeout: 10000 });\n        this.route.navigate(['/home']);\n      }, err => {\n        console.log(err);\n      });\n    }\n    DestroySession() {\n      this.d1.DestroySession().subscribe(res => {\n        //this._flashMessagesService.show(\"Vous êtes bien déconnecté, merci à bientôt\", { cssClass: 'alert-success', timeout: 10000 });\n        this.route.navigate(['/']);\n      }, err => {\n        console.log(err);\n      });\n    }\n    onSearch(f3) {\n      this.route.navigate(['/search/' + f3.value.searchText]);\n    }\n    onItemSelected(f4) {\n      //Trie par Likes\n      if (f4.value.selectItem === '0') {\n        // Initialisation de la page.\n        this.nextPage = 1;\n        this.previousPage = 0;\n        //gestion de la pagination\n        this.isTrieLikes = true;\n        this.isTrie = false;\n        this.isFiltre = false;\n        this.isTrieDate = false;\n        this.isFiltreUser = false;\n        // gestion des buttons next et previous de l'interface \n        this.nextBoolean = true;\n        this.previousBoolean = false;\n        // Appel au service qui trie par propriètaire \n        this.d1.sortLikes(this.nextPage).subscribe(res => {\n          this.posts = res.posts.data;\n          // gestion des buttons next et previous. \n          console.log(\"mes Posts ==> no no bla matbki \", res.posts);\n          this.nextPage = res.posts.next?.page || 0;\n          this.previousPage = res.posts.previous?.page || 0;\n          if (this.nextPage != 0) {\n            this.nextBoolean = true;\n          } else {\n            this.nextBoolean = false;\n          }\n          if (this.previousPage != 0) {\n            this.previousBoolean = true;\n          } else {\n            this.previousBoolean = false;\n          }\n          console.log(this.posts);\n        }, err => {\n          console.log(err);\n        });\n      }\n      // Trie Par Date \n      else if (f4.value.selectItem === '1') {\n        // Initialisation de la page.\n        this.nextPage = 1;\n        this.previousPage = 0;\n        //gestion de la pagination\n        this.isTrieDate = true;\n        this.isTrie = false;\n        this.isFiltre = false;\n        this.isTrieLikes = false;\n        this.isFiltreUser = false;\n        // gestion des buttons next et previous de l'interface \n        this.nextBoolean = true;\n        this.previousBoolean = false;\n        // Appel au service qui trie par propriètaire \n        this.d1.sortDate(this.nextPage).subscribe(res => {\n          this.posts = res.posts.data;\n          // gestion des buttons next et previous. \n          console.log(\"mes Posts ==> no no bla matbki \", res.posts);\n          this.nextPage = res.posts.next?.page || 0;\n          this.previousPage = res.posts.previous?.page || 0;\n          if (this.nextPage != 0) {\n            this.nextBoolean = true;\n          } else {\n            this.nextBoolean = false;\n          }\n          if (this.previousPage != 0) {\n            this.previousBoolean = true;\n          } else {\n            this.previousBoolean = false;\n          }\n          console.log(this.posts);\n        }, err => {\n          console.log(err);\n        });\n      }\n      //Trie par Propriètaire\n      else if (f4.value.selectItem === '2') {\n        // Initialisation de la page.\n        this.nextPage = 1;\n        this.previousPage = 0;\n        // gestion des buttons next et previous de l'interface \n        this.nextBoolean = true;\n        this.previousBoolean = false;\n        //gestion de la pagination\n        this.isTrie = true;\n        this.isFiltre = false;\n        this.isTrieLikes = false;\n        this.isTrieDate = false;\n        this.isFiltreUser = false;\n        // Appel au service qui trie par propriètaire \n        this.d1.sortConnu(this.nextPage).subscribe(res => {\n          this.posts = res.posts.data;\n          // gestion des buttons next et previous. \n          console.log(\"mes Posts ==> no no bla matbki \", res.posts);\n          this.nextPage = res.posts.next?.page || 0;\n          this.previousPage = res.posts.previous?.page || 0;\n          if (this.nextPage != 0) {\n            this.nextBoolean = true;\n          } else {\n            this.nextBoolean = false;\n          }\n          if (this.previousPage != 0) {\n            this.previousBoolean = true;\n          } else {\n            this.previousBoolean = false;\n          }\n          console.log(this.posts);\n        }, err => {\n          console.log(err);\n        });\n      } else {\n        console.log(\"veuillez selectionner un item\");\n      }\n    }\n    onShared(f5) {\n      console.log(f5.value);\n      this.d1.shared(f5.value.idPost, f5.value.username, f5.value.msg).subscribe(res => {\n        //this._flashMessagesService.show(\"Post partagé avec succées\", { cssClass: 'alert-success', timeout: 10000 });\n      }, err => {});\n    }\n    onFiltre(f10) {\n      this.nextBoolean = true;\n      this.previousBoolean = false;\n      //gestion de la pagination\n      this.isTrie = false;\n      this.isTrieLikes = false;\n      this.isTrieDate = false;\n      if (f10.value.FiltreVosMessage == true && f10.value.FiltreMessage == true) {\n        console.log(\"veuillez selectionnez un seul Filtre\");\n      } else if (f10.value.FiltreMessage == true) {\n        console.log(\"Filtre En fonction des messages des autres est selectionné Merci\");\n        this.isFiltre = false;\n        this.d1.FiltreUsersMessage(1).subscribe(res => {\n          this.posts = res.posts.data;\n          this.isFiltreUser = true;\n          this.nextPage = res.posts.next?.page || 0;\n          this.previousPage = res.posts.previous?.page || 0;\n          if (this.nextPage != 0) {\n            this.nextBoolean = true;\n          } else {\n            this.nextBoolean = false;\n          }\n          if (this.previousPage != 0) {\n            this.previousBoolean = true;\n          } else {\n            this.previousBoolean = false;\n          }\n        }, err => {});\n      } else if (f10.value.FiltreVosMessage == true) {\n        console.log(\"Mes messages vont être affiché\");\n        this.isFiltreUser = false;\n        this.d1.FiltreVosMessage(1).subscribe(res => {\n          this.posts = res.posts.data;\n          this.isFiltre = true;\n          this.nextPage = res.posts.next?.page || 0;\n          this.previousPage = res.posts.previous?.page || 0;\n          if (this.nextPage != 0) {\n            this.nextBoolean = true;\n          } else {\n            this.nextBoolean = false;\n          }\n          if (this.previousPage != 0) {\n            this.previousBoolean = true;\n          } else {\n            this.previousBoolean = false;\n          }\n        }, err => {});\n      } else {\n        this.isFiltre = false;\n        this.isTrie = false;\n        console.log(\"aucun filtre n'est selectionné \");\n      }\n    }\n    static #_ = this.ɵfac = function HomeComponent_Factory(t) {\n      return new (t || HomeComponent)(i0.ɵɵdirectiveInject(i1.Store), i0.ɵɵdirectiveInject(i2.PostsService), i0.ɵɵdirectiveInject(i3.webSocketService), i0.ɵɵdirectiveInject(i4.Router), i0.ɵɵdirectiveInject(i5.NotificationService));\n    };\n    static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: HomeComponent,\n      selectors: [[\"app-home\"]],\n      decls: 84,\n      vars: 7,\n      consts: [[\"rel\", \"stylesheet\", \"href\", \"https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css\", \"integrity\", \"sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T\", \"crossorigin\", \"anonymous\"], [\"href\", \"https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css\", \"rel\", \"stylesheet\"], [\"rel\", \"stylesheet\", \"href\", \"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css\"], [1, \"navbar\", \"navbar-light\", \"bg-light\"], [1, \"container-fluid\"], [\"href\", \"#\", 1, \"navbar-brand\"], [\"src\", \"../../assets/gif-logo.gif\", \"alt\", \"\", \"width\", \"60\", \"height\", \"60\"], [1, \"d-flex\"], [\"type\", \"submit\", 1, \"btn\", \"btn-outline-danger\", 3, \"click\"], [1, \"d-flex\", \"gradient-custom-2\"], [1, \"mr-auto\", \"p-2\"], [1, \"font-italic\", \"text-white\"], [1, \"p-2\"], [1, \"card\", \"gradient-custom-2\"], [1, \"card-header\", \"text-white\"], [1, \"card-body\"], [4, \"ngIf\"], [1, \"d-flex\", \"justify-content-center\"], [\"novalidate\", \"\", 3, \"ngSubmit\"], [\"f3\", \"ngForm\"], [1, \"input-group\", \"mb-3\"], [\"name\", \"searchText\", \"type\", \"text\", \"ngModel\", \"\", \"placeholder\", \"Search a Post\", 1, \"form-control\"], [\"searchText\", \"ngModel\"], [\"type\", \"submit\", \"id\", \"button-addon2\", 1, \"btn\", \"btn-outline-secondary\"], [1, \"d-flex\", \"justify-content-center\", \"form-check\"], [\"f10\", \"ngForm\"], [\"name\", \"FiltreVosMessage\", \"type\", \"checkbox\", \"ngModel\", \"\", 1, \"form-check-input\"], [\"FiltreVosMessage\", \"ngModel\"], [\"for\", \"flexCheckChecked\", 1, \"form-check-label\"], [\"name\", \"FiltreMessage\", \"type\", \"checkbox\", \"ngModel\", \"\", 1, \"form-check-input\"], [\"FiltreMessage\", \"ngModel\"], [3, \"ngSubmit\"], [\"f4\", \"ngForm\"], [\"name\", \"selectItem\", \"aria-label\", \".form-select-sm example\", \"ngModel\", \"\", 1, \"form-select\"], [\"selectItem\", \"ngModel\"], [\"value\", \"0\", \"selected\", \"\"], [\"value\", \"1\"], [\"value\", \"2\"], [\"type\", \"submit\", 1, \"btn\", \"btn-outline-secondary\"], [1, \"row\"], [1, \"col-lg-4\"], [1, \"card\", 2, \"width\", \"30rem\"], [1, \"card-header\", \"gradient-custom-2\", \"text-white\"], [4, \"ngFor\", \"ngForOf\"], [1, \"col-lg-6\"], [1, \"justify-content-center\"], [1, \"col-lg-2\"], [1, \"text-white\"], [\"default\", \"https://cdn-icons-png.flaticon.com/512/3135/3135715.png\", \"alt\", \"\", \"width\", \"60\", \"height\", \"60\", 2, \"border-radius\", \"50%\", 3, \"src\"], [\"style\", \"text-decoration-line: underline; font-weight: bold;\", 4, \"ngIf\"], [\"style\", \"font-weight: bold;\", 4, \"ngIf\"], [1, \"card\", \"flex-row\", \"flex-wrap\", 2, \"width\", \"30rem\"], [1, \"card-header\"], [1, \"card-block\", \"px-2\", 2, \"height\", \"60%\"], [1, \"card-text\"], [\"default\", \"https://cdn-icons-png.flaticon.com/512/3135/3135715.png\", \"alt\", \"Card image cap\", 1, \"card-img-top\", 2, \"height\", \"15rem\", 3, \"src\"], [1, \"card-body\", \"bg-info\", \"mb-3\", \"gradient-custom-2\"], [1, \"card-title\", \"text-white\"], [1, \"d-flex\", \"justify-content-evenly\"], [\"f2\", \"ngForm\"], [\"type\", \"hidden\", \"name\", \"idPost\", 3, \"value\", \"ngModel\"], [2, \"text-decoration\", \"underline\"], [\"novalidate\", \"\", 3, \"ngSubmit\", 4, \"ngIf\"], [\"f\", \"ngForm\"], [\"class\", \"input-group mb-3\", 4, \"ngIf\"], [2, \"text-decoration-line\", \"underline\", \"font-weight\", \"bold\"], [2, \"font-weight\", \"bold\"], [\"type\", \"submit\", 1, \"btn\", \"btn-outline-danger\"], [1, \"fa\"], [\"type\", \"submit\", 1, \"btn\", \"btn-danger\"], [1, \"fa\", \"fa-thumbs-up\"], [\"f5\", \"ngForm\"], [\"type\", \"hidden\", \"name\", \"username\", 3, \"value\", \"ngModel\"], [\"name\", \"msg\", \"type\", \"text\", \"ngModel\", \"\", \"placeholder\", \"Ajouter Un Message\", 1, \"form-control\"], [\"msg\", \"ngModel\"], [1, \"fa\", \"fa-share-alt\"], [\"name\", \"comment\", \"type\", \"text\", \"ngModel\", \"\", \"placeholder\", \"Ajouter Un Commentaire\", 1, \"form-control\"], [\"comment\", \"ngModel\"], [1, \"card-header\", \"border-0\"], [1, \"card-block\", \"px-2\"], [1, \"card-title\"], [1, \"w-100\"]],\n      template: function HomeComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          const _r43 = i0.ɵɵgetCurrentView();\n          i0.ɵɵelementStart(0, \"html\")(1, \"head\");\n          i0.ɵɵelement(2, \"link\", 0)(3, \"link\", 1)(4, \"link\", 2);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(5, \"body\")(6, \"nav\", 3)(7, \"div\", 4)(8, \"a\", 5);\n          i0.ɵɵelement(9, \"img\", 6);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(10, \"form\", 7)(11, \"button\", 8);\n          i0.ɵɵlistener(\"click\", function HomeComponent_Template_button_click_11_listener() {\n            return ctx.DestroySession();\n          });\n          i0.ɵɵtext(12, \"D\\u00E9connexion\");\n          i0.ɵɵelementEnd()()()();\n          i0.ɵɵelementStart(13, \"div\", 9)(14, \"div\", 10)(15, \"h1\", 11);\n          i0.ɵɵtext(16, \" R\\u00E9seau Social Du CERI\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(17, \"div\", 12)(18, \"div\", 13)(19, \"h5\", 14);\n          i0.ɵɵtext(20, \"Information Utilisateur\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(21, \"div\", 15);\n          i0.ɵɵtemplate(22, HomeComponent_div_22_Template, 10, 2, \"div\", 16);\n          i0.ɵɵpipe(23, \"async\");\n          i0.ɵɵelementEnd()()()();\n          i0.ɵɵelement(24, \"br\");\n          i0.ɵɵelementStart(25, \"div\", 17)(26, \"form\", 18, 19);\n          i0.ɵɵlistener(\"ngSubmit\", function HomeComponent_Template_form_ngSubmit_26_listener() {\n            i0.ɵɵrestoreView(_r43);\n            const _r1 = i0.ɵɵreference(27);\n            return i0.ɵɵresetView(ctx.onSearch(_r1));\n          });\n          i0.ɵɵelementStart(28, \"div\", 20);\n          i0.ɵɵelement(29, \"input\", 21, 22);\n          i0.ɵɵtext(31, \"\\u00A0\\u00A0 \");\n          i0.ɵɵelementStart(32, \"button\", 23);\n          i0.ɵɵtext(33, \"Search\");\n          i0.ɵɵelementEnd()()()();\n          i0.ɵɵelementStart(34, \"div\", 24)(35, \"form\", 18, 25);\n          i0.ɵɵlistener(\"ngSubmit\", function HomeComponent_Template_form_ngSubmit_35_listener() {\n            i0.ɵɵrestoreView(_r43);\n            const _r3 = i0.ɵɵreference(36);\n            return i0.ɵɵresetView(ctx.onFiltre(_r3));\n          });\n          i0.ɵɵelement(37, \"input\", 26, 27);\n          i0.ɵɵelementStart(39, \"label\", 28);\n          i0.ɵɵtext(40, \" Filtrer Vos messages \");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(41, \"br\")(42, \"input\", 29, 30);\n          i0.ɵɵelementStart(44, \"label\", 28);\n          i0.ɵɵtext(45, \" Filtrer autres messages \");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(46, \"br\");\n          i0.ɵɵelementStart(47, \"button\", 23);\n          i0.ɵɵtext(48, \"Filtrer\");\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelement(49, \"hr\");\n          i0.ɵɵelementStart(50, \"div\", 17)(51, \"form\", 31, 32);\n          i0.ɵɵlistener(\"ngSubmit\", function HomeComponent_Template_form_ngSubmit_51_listener() {\n            i0.ɵɵrestoreView(_r43);\n            const _r6 = i0.ɵɵreference(52);\n            return i0.ɵɵresetView(ctx.onItemSelected(_r6));\n          });\n          i0.ɵɵelementStart(53, \"select\", 33, 34)(55, \"option\", 35);\n          i0.ɵɵtext(56, \"Likes\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(57, \"option\", 36);\n          i0.ɵɵtext(58, \"Date\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(59, \"option\", 37);\n          i0.ɵɵtext(60, \"Propr\\u00E8taire\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelement(61, \"br\");\n          i0.ɵɵelementStart(62, \"button\", 38);\n          i0.ɵɵtext(63, \"Trier\");\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelement(64, \"br\");\n          i0.ɵɵelementStart(65, \"div\", 39)(66, \"div\", 40)(67, \"div\", 41)(68, \"h5\", 42);\n          i0.ɵɵtext(69, \" internautes connect\\u00E9s \");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(70, \"div\", 15)(71, \"div\");\n          i0.ɵɵtemplate(72, HomeComponent_div_72_Template, 3, 3, \"div\", 43);\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelement(73, \"br\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(74, \"div\", 44)(75, \"div\", 45);\n          i0.ɵɵtemplate(76, HomeComponent_div_76_Template, 38, 20, \"div\", 43);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelement(77, \"br\");\n          i0.ɵɵelementStart(78, \"div\", 46)(79, \"div\", 45);\n          i0.ɵɵtemplate(80, HomeComponent_div_80_Template, 3, 0, \"div\", 16);\n          i0.ɵɵtext(81, \" \\u00A0\\u00A0 \");\n          i0.ɵɵtemplate(82, HomeComponent_div_82_Template, 3, 0, \"div\", 16);\n          i0.ɵɵelement(83, \"br\");\n          i0.ɵɵelementEnd()()()()();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(22);\n          i0.ɵɵproperty(\"ngIf\", i0.ɵɵpipeBind1(23, 5, ctx.infos$));\n          i0.ɵɵadvance(50);\n          i0.ɵɵproperty(\"ngForOf\", ctx.connectedUsers);\n          i0.ɵɵadvance(4);\n          i0.ɵɵproperty(\"ngForOf\", ctx.posts);\n          i0.ɵɵadvance(4);\n          i0.ɵɵproperty(\"ngIf\", ctx.previousBoolean);\n          i0.ɵɵadvance(2);\n          i0.ɵɵproperty(\"ngIf\", ctx.nextBoolean);\n        }\n      },\n      dependencies: [i6.NgForOf, i6.NgIf, i7.ɵNgNoValidate, i7.NgSelectOption, i7.ɵNgSelectMultipleOption, i7.DefaultValueAccessor, i7.CheckboxControlValueAccessor, i7.SelectControlValueAccessor, i7.NgControlStatus, i7.NgControlStatusGroup, i7.NgModel, i7.NgForm, i6.AsyncPipe],\n      styles: [\".gradient-custom-2[_ngcontent-%COMP%] {\\n            background: #fccb90;\\n            background: -webkit-linear-gradient(to right, #ee7724, #d8363a, #dd3675, #b44593);\\n            background: linear-gradient(to right, #ee7724, #d8363a, #dd3675, #b44593);\\n        }\"]\n    });\n  }\n  return HomeComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}