{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"../posts.service\";\nimport * as i3 from \"@ngrx/store\";\nfunction SearchComponent_div_13_div_20_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"button\", 7)(2, \"p\", 25)(3, \"i\", 26);\n    i0.ɵɵtext(4, \"\\uF087\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(5, \" J'aime\");\n    i0.ɵɵelementEnd()()();\n  }\n}\nfunction SearchComponent_div_13_div_21_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"button\", 27)(2, \"p\", 25);\n    i0.ɵɵelement(3, \"i\", 28);\n    i0.ɵɵtext(4, \" J'aime\");\n    i0.ɵɵelementEnd()()();\n  }\n}\nfunction SearchComponent_div_13_div_27_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 29);\n    i0.ɵɵelement(1, \"input\", 30, 31)(3, \"input\", 21)(4, \"input\", 32);\n    i0.ɵɵelementStart(5, \"button\", 33);\n    i0.ɵɵtext(6, \"Ajouter\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const p_r8 = ctx.ngIf;\n    const post_r1 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(3);\n    i0.ɵɵpropertyInterpolate(\"value\", post_r1._id);\n    i0.ɵɵpropertyInterpolate(\"ngModel\", post_r1._id);\n    i0.ɵɵadvance(1);\n    i0.ɵɵpropertyInterpolate(\"value\", p_r8.username);\n    i0.ɵɵpropertyInterpolate(\"ngModel\", p_r8.username);\n  }\n}\nfunction SearchComponent_div_13_div_29_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"div\", 9)(2, \"div\", 11)(3, \"div\", 34);\n    i0.ɵɵelement(4, \"img\", 13);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"div\", 35)(6, \"p\", 36)(7, \"strong\");\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(9, \"p\", 15);\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelement(11, \"div\", 37);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelement(12, \"br\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const comment_r11 = ctx.$implicit;\n    i0.ɵɵadvance(4);\n    i0.ɵɵpropertyInterpolate(\"src\", comment_r11.commentatorAvatar, i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate2(\"\", comment_r11.commentatorLastName, \" \", comment_r11.commentatorName, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(comment_r11.text);\n  }\n}\nfunction SearchComponent_div_13_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r13 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\")(1, \"div\", 9)(2, \"div\", 10)(3, \"div\", 11)(4, \"div\", 12);\n    i0.ɵɵelement(5, \"img\", 13);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"div\", 14);\n    i0.ɵɵelement(7, \"br\");\n    i0.ɵɵelementStart(8, \"p\", 15)(9, \"strong\");\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd()()()();\n    i0.ɵɵelement(11, \"img\", 16);\n    i0.ɵɵelementStart(12, \"div\", 17)(13, \"h5\", 18);\n    i0.ɵɵtext(14);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(15, \"p\", 15);\n    i0.ɵɵtext(16);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(17, \"form\", 19, 20);\n    i0.ɵɵlistener(\"ngSubmit\", function SearchComponent_div_13_Template_form_ngSubmit_17_listener() {\n      i0.ɵɵrestoreView(_r13);\n      const _r2 = i0.ɵɵreference(18);\n      const ctx_r12 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r12.onLike(_r2));\n    });\n    i0.ɵɵelement(19, \"input\", 21);\n    i0.ɵɵtemplate(20, SearchComponent_div_13_div_20_Template, 6, 0, \"div\", 22);\n    i0.ɵɵtemplate(21, SearchComponent_div_13_div_21_Template, 5, 0, \"div\", 22);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(22, \"p\");\n    i0.ɵɵtext(23);\n    i0.ɵɵelementEnd()()()();\n    i0.ɵɵelementStart(24, \"div\", 9)(25, \"form\", 19, 23);\n    i0.ɵɵlistener(\"ngSubmit\", function SearchComponent_div_13_Template_form_ngSubmit_25_listener() {\n      i0.ɵɵrestoreView(_r13);\n      const _r5 = i0.ɵɵreference(26);\n      const ctx_r14 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r14.onSubmit(_r5));\n    });\n    i0.ɵɵtemplate(27, SearchComponent_div_13_div_27_Template, 7, 4, \"div\", 24);\n    i0.ɵɵpipe(28, \"async\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtemplate(29, SearchComponent_div_13_div_29_Template, 13, 4, \"div\", 8);\n    i0.ɵɵelement(30, \"br\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const post_r1 = ctx.$implicit;\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(5);\n    i0.ɵɵpropertyInterpolate(\"src\", post_r1.creatorAvatar, i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate2(\"\", post_r1.creator, \" \", post_r1.prenom, \"\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵpropertyInterpolate(\"src\", post_r1.images.url, i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(post_r1.body);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"date : \", post_r1.date, \"\");\n    i0.ɵɵadvance(3);\n    i0.ɵɵpropertyInterpolate(\"value\", post_r1._id);\n    i0.ɵɵpropertyInterpolate(\"ngModel\", post_r1._id);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.isNotLiked);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.isLiked);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"\", post_r1.likes, \" J'aime\");\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngIf\", i0.ɵɵpipeBind1(28, 13, ctx_r0.infos$));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", post_r1.comments);\n  }\n}\nexport let SearchComponent = /*#__PURE__*/(() => {\n  class SearchComponent {\n    constructor(route, maRoute, d1, store) {\n      this.route = route;\n      this.maRoute = maRoute;\n      this.d1 = d1;\n      this.store = store;\n      this.infos$ = this.store.select('infos');\n      this.isNotLiked = true;\n      this.isLiked = false;\n    }\n    ngOnInit() {\n      this.searchText = this.maRoute.snapshot.paramMap.get('tag');\n      this.d1.searchPost(this.searchText).subscribe(res => {\n        this.posts = res.r;\n      }, err => {\n        console.log(err);\n      });\n    }\n    navigation() {\n      console.log(\"navigated to home ==> .\");\n      this.route.navigate(['/home']);\n    }\n    onSubmit(f) {\n      let today = new Date();\n      f.value.date = today.getFullYear() + '-' + today.getMonth() + '-' + today.getDate();\n      f.value.hour = today.getHours() + ':' + today.getMinutes();\n      console.log(\"MonCommentaire est le suivant :\", f.value);\n      this.d1.setComment(f.value).subscribe(res => {\n        console.log(res);\n      }, err => {\n        console.log(err);\n      });\n    }\n    onLike(f2) {\n      console.log(f2.value);\n      if (this.isLiked == false) {\n        this.d1.setLike(f2.value.idPost).subscribe(res => {\n          console.log(\"reussi\");\n        }, err => {\n          console.log(\"it's an error\", err);\n        });\n        this.isLiked = true;\n        this.isNotLiked = false;\n      } else {\n        this.d1.removeLike(f2.value.idPost).subscribe(res => {});\n        this.isLiked = false;\n        this.isNotLiked = true;\n      }\n    }\n    static #_ = this.ɵfac = function SearchComponent_Factory(t) {\n      return new (t || SearchComponent)(i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i1.ActivatedRoute), i0.ɵɵdirectiveInject(i2.PostsService), i0.ɵɵdirectiveInject(i3.Store));\n    };\n    static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: SearchComponent,\n      selectors: [[\"app-search\"]],\n      decls: 14,\n      vars: 1,\n      consts: [[\"rel\", \"stylesheet\", \"href\", \"https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css\", \"integrity\", \"sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T\", \"crossorigin\", \"anonymous\"], [\"rel\", \"stylesheet\", \"href\", \"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css\"], [1, \"navbar\", \"navbar-light\", \"bg-light\"], [1, \"container-fluid\"], [1, \"navbar-brand\", 3, \"click\"], [\"src\", \"../../assets/gif-logo.gif\", \"alt\", \"\", \"width\", \"60\", \"height\", \"60\"], [1, \"d-flex\"], [\"type\", \"submit\", 1, \"btn\", \"btn-outline-danger\"], [4, \"ngFor\", \"ngForOf\"], [1, \"d-flex\", \"justify-content-center\"], [1, \"card\", 2, \"width\", \"30rem\"], [1, \"card\", \"flex-row\", \"flex-wrap\", 2, \"width\", \"30rem\"], [1, \"card-header\"], [\"default\", \"https://cdn-icons-png.flaticon.com/512/3135/3135715.png\", \"alt\", \"\", \"width\", \"60\", \"height\", \"60\", 2, \"border-radius\", \"50%\", 3, \"src\"], [1, \"card-block\", \"px-2\", 2, \"height\", \"60%\"], [1, \"card-text\"], [\"alt\", \"Card image cap\", 1, \"card-img-top\", 2, \"height\", \"15rem\", 3, \"src\"], [1, \"card-body\", \"bg-info\", \"mb-3\", \"gradient-custom-2\"], [1, \"card-title\", \"text-white\"], [\"novalidate\", \"\", 3, \"ngSubmit\"], [\"f2\", \"ngForm\"], [\"type\", \"hidden\", \"name\", \"idPost\", 3, \"value\", \"ngModel\"], [4, \"ngIf\"], [\"f\", \"ngForm\"], [\"class\", \"input-group mb-3\", \"style\", \"width: 30rem;\", 4, \"ngIf\"], [1, \"text-white\"], [1, \"fa\"], [\"type\", \"submit\", 1, \"btn\", \"btn-danger\"], [1, \"fa\", \"fa-thumbs-up\"], [1, \"input-group\", \"mb-3\", 2, \"width\", \"30rem\"], [\"name\", \"comment\", \"type\", \"text\", \"ngModel\", \"\", \"placeholder\", \"Ajouter Un Commentaire\", 1, \"form-control\"], [\"comment\", \"ngModel\"], [\"type\", \"hidden\", \"name\", \"username\", 3, \"value\", \"ngModel\"], [\"type\", \"submit\", \"id\", \"button-addon2\", 1, \"btn\", \"btn-outline-secondary\"], [1, \"card-header\", \"border-0\"], [1, \"card-block\", \"px-2\"], [1, \"card-title\"], [1, \"w-100\"]],\n      template: function SearchComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"html\")(1, \"head\");\n          i0.ɵɵelement(2, \"link\", 0)(3, \"link\", 1);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(4, \"body\")(5, \"nav\", 2)(6, \"div\", 3)(7, \"button\", 4);\n          i0.ɵɵlistener(\"click\", function SearchComponent_Template_button_click_7_listener() {\n            return ctx.navigation();\n          });\n          i0.ɵɵelement(8, \"img\", 5);\n          i0.ɵɵtext(9, \" Home \");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(10, \"form\", 6)(11, \"button\", 7);\n          i0.ɵɵtext(12, \"D\\u00E9connexion\");\n          i0.ɵɵelementEnd()()()();\n          i0.ɵɵtemplate(13, SearchComponent_div_13_Template, 31, 15, \"div\", 8);\n          i0.ɵɵelementEnd()();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(13);\n          i0.ɵɵproperty(\"ngForOf\", ctx.posts);\n        }\n      },\n      styles: [\".gradient-custom-2[_ngcontent-%COMP%] {\\n            background: #fccb90;\\n            background: -webkit-linear-gradient(to right, #ee7724, #d8363a, #dd3675, #b44593);\\n            background: linear-gradient(to right, #ee7724, #d8363a, #dd3675, #b44593);\\n        }\"]\n    });\n  }\n  return SearchComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}